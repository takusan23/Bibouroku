<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>ã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ | ãŸãã•ã‚“ã®å‚™å¿˜éŒ² |
        å‚™å¿˜éŒ²</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Android,Kotlin,MediaProjection,ç”»é¢éŒ²ç”»,AndroidQ">
    <meta name="description" content="ã©ã†ã‚‚ã“ã‚“ã°ã‚“ã¯ã€‚ãƒ†ã‚¹ãƒˆæœŸé–“ã¤ã‚‰ã„ã€‚ä»Šå›ã¯ç”»é¢ã‚’éŒ²ç”»ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿã“ã“ã§ã¯RootåŒ–ã§åˆ©ç”¨ã§ãã‚‹ç”»é¢éŒ²ç”»ã¯ãªã—ã®æ–¹å‘ã§ã€‚Rootå–ã‚Œã°å†…éƒ¨éŸ³å£°ãŒå–ã‚Œã‚‹ã£ã¦èã„ãŸã“ã¨ã‚ã‚‹ã€‚ã‚ã¨å¤–éƒ¨å‡ºåŠ›ç«¯å­ã‚’åˆ©ç”¨ã—ã¦éŒ²ç”»ã™ã‚‹è©±ã‚‚ãªã—ã®æ–¹å‘ã§ã€‚ç§ãŒçŸ¥ã£ã¦ã‚‹é™ã‚Šã§ã¯ Xperia Z3 &#x2F; Z3 Compact ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒæ­è¼‰ã•ã‚ŒãŸï¼ˆ4.4ï¼‰ã€‚ï¼ˆã§ã™ãŒã„ã¤ã®é–“ã«ã‹ã‚¹">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Android &#x2F; MediaProjection &#x2F; Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹">
<meta property="og:url" content="https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/index.html">
<meta property="og:site_name" content="ãŸãã•ã‚“ã®å‚™å¿˜éŒ²">
<meta property="og:description" content="ã©ã†ã‚‚ã“ã‚“ã°ã‚“ã¯ã€‚ãƒ†ã‚¹ãƒˆæœŸé–“ã¤ã‚‰ã„ã€‚ä»Šå›ã¯ç”»é¢ã‚’éŒ²ç”»ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿã“ã“ã§ã¯RootåŒ–ã§åˆ©ç”¨ã§ãã‚‹ç”»é¢éŒ²ç”»ã¯ãªã—ã®æ–¹å‘ã§ã€‚Rootå–ã‚Œã°å†…éƒ¨éŸ³å£°ãŒå–ã‚Œã‚‹ã£ã¦èã„ãŸã“ã¨ã‚ã‚‹ã€‚ã‚ã¨å¤–éƒ¨å‡ºåŠ›ç«¯å­ã‚’åˆ©ç”¨ã—ã¦éŒ²ç”»ã™ã‚‹è©±ã‚‚ãªã—ã®æ–¹å‘ã§ã€‚ç§ãŒçŸ¥ã£ã¦ã‚‹é™ã‚Šã§ã¯ Xperia Z3 &#x2F; Z3 Compact ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒæ­è¼‰ã•ã‚ŒãŸï¼ˆ4.4ï¼‰ã€‚ï¼ˆã§ã™ãŒã„ã¤ã®é–“ã«ã‹ã‚¹">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/f504e4f1-57ae-e459-8f51-eb96af80bfea.png">
<meta property="og:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/ebe8ef29-bd69-3afc-6aec-100a92f9322f.png">
<meta property="og:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/8942a6c6-0950-3c74-128a-a0fed4934bab.png">
<meta property="og:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/174fed18-0694-8111-6287-94f26c3bfd7b.png">
<meta property="og:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/62653173-7209-4a74-9ff6-63f8eb695d83.png">
<meta property="article:published_time" content="2020-04-05T16:27:15.406Z">
<meta property="article:modified_time" content="2020-04-05T16:40:39.228Z">
<meta property="article:author" content="takusan23">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Kotlin">
<meta property="article:tag" content="MediaProjection">
<meta property="article:tag" content="ç”»é¢éŒ²ç”»">
<meta property="article:tag" content="AndroidQ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/f504e4f1-57ae-e459-8f51-eb96af80bfea.png">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <link rel="stylesheet" href="/css/fonts/custom/css/custom.css">
    <script>window.lazyScripts = []</script>

    <!-- custom head -->
    


    <style>
        body {
            font-family: "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3", "Hiragino Kaku Gothic Pro", "ãƒ¡ã‚¤ãƒªã‚ª", Meiryo, Osaka, "ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯", "MS PGothic", sans-serif;
            color: #630;
            line-height: 25px;
            font-size: 0.95em;
        }
    </style>

<meta name="generator" content="Hexo 4.2.0"></head>
<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.gif">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">takusan23</h5>
          <a href="mailto:takusan_0913@yahoo.co.jp" title="takusan_0913@yahoo.co.jp" class="mail">takusan_0913@yahoo.co.jp</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/takusan23" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://best-friends.chat/@takusan_23" target="_blank" rel="noopener"  >
                <i class="icon icon-lg icon-link"></i>
                Mastodon
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">ã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="æ¤œç´¢">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">ã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-05T16:27:15.406Z" itemprop="datePublished" class="page-time">
  2020å¹´04æœˆ06æ—¥ 01æ™‚27åˆ†15ç§’
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ"><span class="post-toc-number">1.</span> <span class="post-toc-text">ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç«¯æœ«ç´¹ä»‹"><span class="post-toc-number">2.</span> <span class="post-toc-text">ç«¯æœ«ç´¹ä»‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä½œã‚‹ã‚‚ã®"><span class="post-toc-number">3.</span> <span class="post-toc-text">ä½œã‚‹ã‚‚ã®</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#å®Ÿè£…"><span class="post-toc-number"></span> <span class="post-toc-text">å®Ÿè£…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android-10ã§ã‚‚å‹•ãã‚ˆã†ã«"><span class="post-toc-number">1.</span> <span class="post-toc-text">Android 10ã§ã‚‚å‹•ãã‚ˆã†ã«</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æµã‚Œ"><span class="post-toc-number">2.</span> <span class="post-toc-text">æµã‚Œ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ"><span class="post-toc-number">3.</span> <span class="post-toc-text">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Manifest"><span class="post-toc-number">4.</span> <span class="post-toc-text">Manifest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ¨©é™ã‚’ã‚‚ã‚‰ã†"><span class="post-toc-number">5.</span> <span class="post-toc-text">æ¨©é™ã‚’ã‚‚ã‚‰ã†</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹"><span class="post-toc-number">6.</span> <span class="post-toc-text">ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Serviceä½œæˆ"><span class="post-toc-number">7.</span> <span class="post-toc-text">Serviceä½œæˆ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç”»é¢éŒ²ç”»"><span class="post-toc-number">8.</span> <span class="post-toc-text">ç”»é¢éŒ²ç”»</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å®Œæˆï¼"><span class="post-toc-number">9.</span> <span class="post-toc-text">å®Œæˆï¼</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Pixel-3-XL-ã§é­é‡ã—ãŸå•é¡Œ"><span class="post-toc-number">10.</span> <span class="post-toc-text">Pixel 3 XL ã§é­é‡ã—ãŸå•é¡Œ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ"><span class="post-toc-number">11.</span> <span class="post-toc-text">å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#çµ‚ã‚ã‚Šã«"><span class="post-toc-number">12.</span> <span class="post-toc-text">çµ‚ã‚ã‚Šã«</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#GitHub"><span class="post-toc-number">13.</span> <span class="post-toc-text">GitHub</span></a></li></ol>
        </nav>
    </aside>


<article id="post-MediaProjection"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">ã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹</h1>
        <div class="post-meta">
            <time class="post-time" title="2020å¹´04æœˆ06æ—¥ 01æ™‚27åˆ†15ç§’ 01:27:15" datetime="2020-04-05T16:27:15.406Z"  itemprop="datePublished">2020å¹´04æœˆ06æ—¥ 01æ™‚27åˆ†15ç§’</time>

            


            
<!-- <span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span> -->


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>ã©ã†ã‚‚ã“ã‚“ã°ã‚“ã¯ã€‚ãƒ†ã‚¹ãƒˆæœŸé–“ã¤ã‚‰ã„ã€‚<br>ä»Šå›ã¯ç”»é¢ã‚’éŒ²ç”»ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p>
<h2 id="ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ"><a href="#ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ" class="headerlink" title="ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ"></a>ç”»é¢éŒ²ç”»ã®æ­´å²ï¼Ÿ</h2><p>ã“ã“ã§ã¯RootåŒ–ã§åˆ©ç”¨ã§ãã‚‹ç”»é¢éŒ²ç”»ã¯ãªã—ã®æ–¹å‘ã§ã€‚Rootå–ã‚Œã°å†…éƒ¨éŸ³å£°ãŒå–ã‚Œã‚‹ã£ã¦èã„ãŸã“ã¨ã‚ã‚‹ã€‚<br>ã‚ã¨å¤–éƒ¨å‡ºåŠ›ç«¯å­ã‚’åˆ©ç”¨ã—ã¦éŒ²ç”»ã™ã‚‹è©±ã‚‚ãªã—ã®æ–¹å‘ã§ã€‚<br>ç§ãŒçŸ¥ã£ã¦ã‚‹é™ã‚Šã§ã¯</p>
<p>Xperia Z3 / Z3 Compact ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒæ­è¼‰ã•ã‚ŒãŸï¼ˆ4.4ï¼‰ã€‚<br>ï¼ˆã§ã™ãŒã„ã¤ã®é–“ã«ã‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼æ©Ÿèƒ½ã¯ãªããªã£ãŸãã†ã§ã™ã€‚ï¼ˆXperia 1ã§å¾©æ´»ã—ãŸã‚‰ã—ã„ï¼‰ï¼‰<br>ï¼ˆã‚ã¨ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã¨ã‹ã©ã“è¡Œã£ãŸã®ï¼Ÿï¼‰<br>â†“<br>5.0ã§ã€ŒMediaProjection APIã€ãŒè¿½åŠ ã•ã‚Œã¦ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¢ãƒ—ãƒªã§ã‚‚éŒ²ç”»ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚<br>Google Play ã‚²ãƒ¼ãƒ ã§ç”»é¢éŒ²ç”»æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚ŒãŸã‚Šã—ãŸã€‚<br>ã—ã‹ã—ã“ã®æ‰‹ã®ç”»é¢éŒ²ç”»ã‚¢ãƒ—ãƒªã¯éŸ³å£°ã‚’ãƒã‚¤ã‚¯ã‹ã‚‰æ’®ã£ã¦ã„ã‚‹ã®ã§ç«¯æœ«ã®éŸ³ä»¥å¤–ãŒå…¥ã£ã¦ã—ã¾ã†ã€‚<br>â†“<br>ï¼ˆSamsungã¨ã‹ãŒå†…éƒ¨éŸ³å£°ãŒå–ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚’ç‹¬è‡ªã§è¿½åŠ ã—ã¦ã„ã‚‹ã‚‰ã—ã„ï¼Ÿï¼‰<br>â†“<br>10.0ã§ç«¯æœ«ã®å†…éƒ¨éŸ³å£°ã‚’å–ã‚Œã‚‹ã€ŒAudioPlaybackCapture APIã€ãŒè¿½åŠ ã•ã‚ŒãŸã€‚<br>ä»Šå›ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ã¨ã„ã†ã‹å®Ÿè£…æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚æ®‹å¿µã€‚ğŸ˜¥</p>
<h2 id="ç«¯æœ«ç´¹ä»‹"><a href="#ç«¯æœ«ç´¹ä»‹" class="headerlink" title="ç«¯æœ«ç´¹ä»‹"></a>ç«¯æœ«ç´¹ä»‹</h2><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>ç«¯æœ«</td>
<td>Pixel 3 XL</td>
</tr>
<tr>
<td>Androidãƒãƒ¼ã‚¸ãƒ§ãƒ³</td>
<td>10</td>
</tr>
<tr>
<td>compileSdkVersion</td>
<td>29</td>
</tr>
</tbody></table>
<h2 id="ä½œã‚‹ã‚‚ã®"><a href="#ä½œã‚‹ã‚‚ã®" class="headerlink" title="ä½œã‚‹ã‚‚ã®"></a>ä½œã‚‹ã‚‚ã®</h2><p>ç”»é¢éŒ²ç”»ã—ã¦mp4ã§ä¿å­˜ã™ã‚‹ã€‚<br>éŸ³å£°ã¯ãƒã‚¤ã‚¯ã‹ã‚‰å–ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚</p>
<h1 id="å®Ÿè£…"><a href="#å®Ÿè£…" class="headerlink" title="å®Ÿè£…"></a>å®Ÿè£…</h1><p>æœ¬é¡Œã§ã™ã€‚ã“ã“ã¾ã§é•·ã‹ã£ãŸã­ã€‚</p>
<h2 id="Android-10ã§ã‚‚å‹•ãã‚ˆã†ã«"><a href="#Android-10ã§ã‚‚å‹•ãã‚ˆã†ã«" class="headerlink" title="Android 10ã§ã‚‚å‹•ãã‚ˆã†ã«"></a>Android 10ã§ã‚‚å‹•ãã‚ˆã†ã«</h2><p>ä¿å­˜å…ˆã‚’å¯¾è±¡ç¯„å›²åˆ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã™ã‚‹ã€‚<br>Serviceã«Android 10ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸå±æ€§ã€ŒforegroundServiceTypeã€ã‚’æ›¸ãè¶³ã™ã€‚</p>
<h2 id="æµã‚Œ"><a href="#æµã‚Œ" class="headerlink" title="æµã‚Œ"></a>æµã‚Œ</h2><p>æ¨©é™ãŒã‚ã‚‹ã‹ç¢ºèªã™ã‚‹ï¼ˆãƒã‚¤ã‚¯ã®éŒ²éŸ³ï¼‰<br>â†“<br>ç”»é¢éŒ²ç”»ã—ã¦ã„ã„ã‹èãã€‚<br>â†“<br>è¨±å¯ãŒå¾—ã‚‰ã‚ŒãŸã‚‰Serviceã‚’èµ·å‹•ã™ã‚‹ã€‚<br>â†“<br>Serviceã®ä¸­ã§ç”»é¢éŒ²ç”»ã‚’è¡Œã†ã€‚</p>
<p>ServiceãŒçµ‚äº†ã™ã‚‹ã¨åŒæ™‚ã«éŒ²ç”»ã‚‚çµ‚äº†ã•ã›ã‚‹ã€‚</p>
<h2 id="ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ"><a href="#ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ" class="headerlink" title="ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ"></a>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</h2><p>Activityã¯MainActivityã ã‘ã§ã™ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/rec_button"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"éŒ²ç”»"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/stop_button"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">"åœæ­¢"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Manifest"><a href="#Manifest" class="headerlink" title="Manifest"></a>Manifest</h2><p>å¿…è¦ãªæ¨©é™ã¯</p>
<table>
<thead>
<tr>
<th>æ¨©é™</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>FOREGROUND_SERVICE</td>
<td>ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè¡Œã«å¿…è¦</td>
</tr>
<tr>
<td>RECORD_AUDIO</td>
<td>ãƒã‚¤ã‚¯ã‚’ä½¿ã†ã®ã«å¿…è¦</td>
</tr>
</tbody></table>
<p>ã“ã®æ®µéšã§ã¯ã€ŒScreenRecordServiceã€ã¯ä½œæˆã—ã¦ãªã„ã®ã§èµ¤ããªã‚‹ã‘ã©å¾Œã§ä½œã‚‹ã®ã§ãŠï½‹ã€‚<br><strong>android:foregroundServiceType=â€mediaProjectionâ€</strong>ã‚’å¿˜ã‚Œãšã«</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;manifest xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    package&#x3D;&quot;io.github.takusan23.screenrecordsample&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;uses-permission android:name&#x3D;&quot;android.permission.FOREGROUND_SERVICE&quot;&#x2F;&gt;</span><br><span class="line">    &lt;uses-permission android:name&#x3D;&quot;android.permission.RECORD_AUDIO&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;application</span><br><span class="line">        android:allowBackup&#x3D;&quot;true&quot;</span><br><span class="line">        android:icon&#x3D;&quot;@mipmap&#x2F;ic_launcher&quot;</span><br><span class="line">        android:label&#x3D;&quot;@string&#x2F;app_name&quot;</span><br><span class="line">        android:roundIcon&#x3D;&quot;@mipmap&#x2F;ic_launcher_round&quot;</span><br><span class="line">        android:supportsRtl&#x3D;&quot;true&quot;</span><br><span class="line">        android:theme&#x3D;&quot;@style&#x2F;AppTheme&quot;&gt;</span><br><span class="line">        &lt;activity android:name&#x3D;&quot;.MainActivity&quot;&gt;</span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name&#x3D;&quot;android.intent.action.MAIN&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;category android:name&#x3D;&quot;android.intent.category.LAUNCHER&quot; &#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;intent-filter&gt;</span><br><span class="line">        &lt;&#x2F;activity&gt;</span><br><span class="line">        &lt;service android:name&#x3D;&quot;.ScreenRecordService&quot; android:foregroundServiceType&#x3D;&quot;mediaProjection&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;application&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;manifest&gt;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨©é™ã‚’ã‚‚ã‚‰ã†"><a href="#æ¨©é™ã‚’ã‚‚ã‚‰ã†" class="headerlink" title="æ¨©é™ã‚’ã‚‚ã‚‰ã†"></a>æ¨©é™ã‚’ã‚‚ã‚‰ã†</h2><p>éŒ²ç”»ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰ã¾ãšãƒã‚¤ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚<br>ãªã„å ´åˆã¯æ¨©é™ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã•ã›ã¾ã™ã€‚</p>
<p>æ¨©é™ãŒã‚ã‚‹å ´åˆã¯éŒ²ç”»ã‚’é–‹å§‹ã™ã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã•ã›ã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœ</span><br><span class="line">val code &#x3D; 512</span><br><span class="line">val permissionCode &#x3D; 810</span><br><span class="line">lateinit var projectionManager: MediaProjectionManager</span><br><span class="line"></span><br><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState)</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">    projectionManager &#x3D;</span><br><span class="line">        getSystemService(Context.MEDIA_PROJECTION_SERVICE) as MediaProjectionManager</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;ç”»é¢éŒ²ç”»ã‚’ã—ã¦ã‚‚ã„ã„ã‹èã</span><br><span class="line">    rec_button.setOnClickListener &#123;</span><br><span class="line">        &#x2F;&#x2F;ãã®å‰ã«ãƒã‚¤ã‚¯ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã„ã‹å°‹ã­ã‚‹</span><br><span class="line">        if (ContextCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO)</span><br><span class="line">            !&#x3D; PackageManager.PERMISSION_GRANTED</span><br><span class="line">        ) &#123;</span><br><span class="line">            requestPermissions(arrayOf(Manifest.permission.RECORD_AUDIO), permissionCode)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            &#x2F;&#x2F;ãƒã‚¤ã‚¯ã®æ¨©é™ãŒã‚ã‚‹ã®ã§ç”»é¢éŒ²ç”»ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</span><br><span class="line">            &#x2F;&#x2F;ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’å‡ºã™</span><br><span class="line">            startActivityForResult(projectionManager.createScreenCaptureIntent(), code)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;åœæ­¢ãƒœã‚¿ãƒ³ã§æ­¢ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«</span><br><span class="line">    stop_button.setOnClickListener &#123;</span><br><span class="line">        val intent &#x3D; Intent(this, ScreenRecordService::class.java)</span><br><span class="line">        stopService(intent)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;æ¨©é™ã®çµæœå—ã‘å–ã‚‹</span><br><span class="line">override fun onRequestPermissionsResult(</span><br><span class="line">    requestCode: Int,</span><br><span class="line">    permissions: Array&lt;out String&gt;,</span><br><span class="line">    grantResults: IntArray</span><br><span class="line">) &#123;</span><br><span class="line">    super.onRequestPermissionsResult(requestCode, permissions, grantResults)</span><br><span class="line">    if (requestCode &#x3D;&#x3D; permissionCode) &#123;</span><br><span class="line">        &#x2F;&#x2F;ãƒã‚¤ã‚¯ã¸ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã’ã£ã¨</span><br><span class="line">        Toast.makeText(this, &quot;æ¨©é™ãŒä»˜ä¸ã•ã‚Œã¾ã—ãŸã€‚&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹"><a href="#ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹" class="headerlink" title="ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹"></a>ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹Serviceã‚’èµ·å‹•ã•ã›ã‚‹</h2><p>ã¨ã“ã‚ã§Androidã®ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¨ã‹ã‚’ã„ã‚ã„ã‚å‚è€ƒã«ã—ãŸã‚ã‘ã§ã™ãŒã€Android 10ã§è¿½åŠ ã•ã‚ŒãŸå±æ€§ã€ŒforegroundServiceTypeã€ã®ã›ã„ã‹Activityã§ã¯ç”»é¢éŒ²ç”»ãŒå‡ºæ¥ãªã„ã£ã½ã„ã‚“ã§ã™ã‚ˆã­ã€‚<br>ãªã®ã§ä»•æ–¹ãªãServiceã§ã€‚ã¾ã‚Serviceã§å®Ÿè£…ã—ãŸã»ã†ãŒåºƒãä½¿ãˆãã†ã ã‚‚ã‚“ã­ã€‚</p>
<p>MainActivity.ktã«ã€ŒonActivityResultã€ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç”»é¢éŒ²ç”»ã®åˆå¦ã‚’å—ã‘å–ã‚‹</span><br><span class="line">override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123;</span><br><span class="line">    super.onActivityResult(requestCode, resultCode, data)</span><br><span class="line">    &#x2F;&#x2F;æˆåŠŸï¼‹çµæœãŒç”»é¢éŒ²ç”»ã®ç‰©ã‹</span><br><span class="line">    if (resultCode &#x3D;&#x3D; Activity.RESULT_OK &amp;&amp; requestCode &#x3D;&#x3D; code) &#123;</span><br><span class="line">        &#x2F;&#x2F;Serviceèµ·å‹•</span><br><span class="line">        &#x2F;&#x2F;Manifestã«ã€Œandroid:foregroundServiceType&#x3D;&quot;mediaProjection&quot;ã€ã‚’ä»˜ã‘è¶³ã—ã¦ãŠã</span><br><span class="line">        val intent &#x3D; Intent(this, ScreenRecordService::class.java)</span><br><span class="line">        intent.putExtra(&quot;code&quot;, resultCode) &#x2F;&#x2F;å¿…è¦ãªã®ã¯çµæœã€‚startActivityForResultã®requestCodeã§ã¯ãªã„ã€‚</span><br><span class="line">        intent.putExtra(&quot;data&quot;, data)</span><br><span class="line">        &#x2F;&#x2F;ç”»é¢ã®å¤§ãã•ã‚‚ä¸€ç·’ã«å…¥ã‚Œã‚‹</span><br><span class="line">        val metrics &#x3D; resources.displayMetrics;</span><br><span class="line">        intent.putExtra(&quot;height&quot;, metrics.heightPixels)</span><br><span class="line">        intent.putExtra(&quot;width&quot;, metrics.widthPixels)</span><br><span class="line">        intent.putExtra(&quot;dpi&quot;, metrics.densityDpi)</span><br><span class="line"></span><br><span class="line">        startForegroundService(intent)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Serviceä½œæˆ"><a href="#Serviceä½œæˆ" class="headerlink" title="Serviceä½œæˆ"></a>Serviceä½œæˆ</h2><p>ãã‚Œã‹ã‚‰ã€ŒScreenRecordService.ktã€ã‚’ä½œæˆã—ã¦ä¸‹ã•ã„ã€‚<br>ä½œæˆã—ãŸã‚‰ä»¥ä¸‹ã®ã‚ˆã†ã«ã€‚<br>setSmallIconãŒèµ¤ããªã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒ™ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆã‹ã‚‰è¿½åŠ ã—ãŸãŸã‚ã§ã™ã€‚<br>ãªã®ã§ç”»åƒã®ã‚ˆã†ã«ã—ã¦è¦‹ã¤ã‘ã¦ä¸‹ã•ã„ã€‚<br><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/f504e4f1-57ae-e459-8f51-eb96af80bfea.png" alt="image.png"></p>
<p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/ebe8ef29-bd69-3afc-6aec-100a92f9322f.png" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">class ScreenRecordService : Service() &#123;</span><br><span class="line">    &#x2F;&#x2F;Intentã«è©°ã‚ãŸãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹</span><br><span class="line">    var data: Intent? &#x3D; null</span><br><span class="line">    var code &#x3D; Activity.RESULT_OK</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;ç”»é¢éŒ²ç”»ã§ä½¿ã†</span><br><span class="line">    lateinit var mediaRecorder: MediaRecorder</span><br><span class="line">    lateinit var projectionManager: MediaProjectionManager</span><br><span class="line">    lateinit var projection: MediaProjection</span><br><span class="line">    lateinit var virtualDisplay: VirtualDisplay</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;ç”»é¢ã®å¤§ãã•</span><br><span class="line">    &#x2F;&#x2F;Pixel 3 XLã ã¨ãªã‚“ã‹ãŠã‹ã—ããªã‚‹</span><br><span class="line">    var height &#x3D; 2800</span><br><span class="line">    var width &#x3D; 1400</span><br><span class="line">    var dpi &#x3D; 1000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    override fun onBind(p0: Intent?): IBinder? &#123;</span><br><span class="line">        return null</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;ãƒ‡ãƒ¼ã‚¿å—ã‘å–ã‚‹</span><br><span class="line">        data &#x3D; intent?.getParcelableExtra(&quot;data&quot;)</span><br><span class="line">        code &#x3D; intent?.getIntExtra(&quot;code&quot;, Activity.RESULT_OK) ?: Activity.RESULT_OK</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;ç”»é¢ã®å¤§ãã•</span><br><span class="line">        &#x2F;&#x2F;   height &#x3D; intent?.getIntExtra(&quot;height&quot;, 1000) ?: 1000</span><br><span class="line">        &#x2F;&#x2F;   width &#x3D; intent?.getIntExtra(&quot;width&quot;, 1000) ?: 1000</span><br><span class="line">        dpi &#x3D; intent?.getIntExtra(&quot;dpi&quot;, 1000) ?: 1000</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;é€šçŸ¥ã‚’å‡ºã™ã€‚</span><br><span class="line">        val notificationManager &#x3D;</span><br><span class="line">            getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager</span><br><span class="line">        &#x2F;&#x2F;é€šçŸ¥ãƒãƒ£ãƒ³ãƒãƒ«</span><br><span class="line">        val channelID &#x3D; &quot;rec_notify&quot;</span><br><span class="line">        &#x2F;&#x2F;é€šçŸ¥ãƒãƒ£ãƒ³ãƒãƒ«ãŒå­˜åœ¨ã—ãªã„ã¨ãã¯ç™»éŒ²ã™ã‚‹</span><br><span class="line">        if (notificationManager.getNotificationChannel(channelID) &#x3D;&#x3D; null) &#123;</span><br><span class="line">            val channel &#x3D;</span><br><span class="line">                NotificationChannel(channelID, &quot;éŒ²ç”»ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ä¸­é€šçŸ¥&quot;, NotificationManager.IMPORTANCE_HIGH)</span><br><span class="line">            notificationManager.createNotificationChannel(channel)</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;é€šçŸ¥ä½œæˆ</span><br><span class="line">        val notification &#x3D; Notification.Builder(applicationContext, channelID)</span><br><span class="line">            .setContentText(&quot;éŒ²ç”»ä¸­ã§ã™ã€‚&quot;)</span><br><span class="line">            .setContentTitle(&quot;ç”»é¢éŒ²ç”»&quot;)</span><br><span class="line">            .setSmallIcon(R.drawable.ic_cast_black_24dp)    &#x2F;&#x2F;ã‚¢ã‚¤ã‚³ãƒ³ã¯ãƒ™ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆã‹ã‚‰</span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">        startForeground(1, notification)</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;éŒ²ç”»é–‹å§‹</span><br><span class="line">        startRec()</span><br><span class="line"></span><br><span class="line">        return START_NOT_STICKY</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;Serviceçµ‚äº†ã¨åŒæ™‚ã«éŒ²ç”»çµ‚äº†</span><br><span class="line">    override fun onDestroy() &#123;</span><br><span class="line">        super.onDestroy()</span><br><span class="line">        stopRec()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç”»é¢éŒ²ç”»"><a href="#ç”»é¢éŒ²ç”»" class="headerlink" title="ç”»é¢éŒ²ç”»"></a>ç”»é¢éŒ²ç”»</h2><p>ScreenRecordService.ktã«ä»˜ã‘è¶³ã—ã¦ãã ã•ã„ã€‚<br>ã“ã“ã¯ã‚ˆãã‚ã‹ã‚‰ã‚“ã®ã§ã‚ã¾ã‚Šè¨€ãˆã¾ã›ã‚“ãŒã€ã€ŒsetVideoEncodingBitRateã€ã‚’é«˜ãã™ã‚Œã°ç”»è³ªã‚¢ãƒƒãƒ—ï¼†ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚¢ãƒƒãƒ—ã§ã™ã€‚<br>ãƒ•ã‚¡ã‚¤ãƒ«åã¯æ•°å­—.mp4ã«ãªã‚Šã¾ã™ã€‚<code>${System.currentTimeMillis()}.mp4</code>ã®éƒ¨åˆ†ãŒãƒ•ã‚¡ã‚¤ãƒ«åã«ãªã£ã¦ã„ã‚‹ã®ã§å¤‰ãˆãŸã„å ´åˆã¯ã©ã†ãã€‚<br>ä¿å­˜å…ˆã¯<strong>Android/data/io.github.takusan23.screenrecordsample/file</strong>ã®ä¸­ã§ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;éŒ²ç”»é–‹å§‹</span><br><span class="line">fun startRec() &#123;</span><br><span class="line">    if (data !&#x3D; null) &#123;</span><br><span class="line">        projectionManager &#x3D;</span><br><span class="line">            getSystemService(Context.MEDIA_PROJECTION_SERVICE) as MediaProjectionManager</span><br><span class="line">        &#x2F;&#x2F;codeã¯Activity.RESULT_OKã¨ã‹ãŒå…¥ã‚‹ã€‚</span><br><span class="line">        projection &#x3D;</span><br><span class="line">            projectionManager.getMediaProjection(code, data!!)</span><br><span class="line"></span><br><span class="line">        mediaRecorder &#x3D; MediaRecorder()</span><br><span class="line">        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC)</span><br><span class="line">        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE)</span><br><span class="line">        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4)</span><br><span class="line">        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264)</span><br><span class="line">        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)</span><br><span class="line">        mediaRecorder.setVideoEncodingBitRate(1080 * 10000) &#x2F;&#x2F;1080ã¯512ãã‚‰ã„ã«ã—ã¨ã„ãŸã»ã†ãŒå°ã•ãã§ãã‚‹</span><br><span class="line">        mediaRecorder.setVideoFrameRate(30)</span><br><span class="line">        mediaRecorder.setVideoSize(width, height)</span><br><span class="line">        mediaRecorder.setAudioSamplingRate(44100)</span><br><span class="line">        mediaRecorder.setOutputFile(getFilePath())</span><br><span class="line">        mediaRecorder.prepare()</span><br><span class="line"></span><br><span class="line">        virtualDisplay &#x3D; projection.createVirtualDisplay(</span><br><span class="line">            &quot;recode&quot;,</span><br><span class="line">            width,</span><br><span class="line">            height,</span><br><span class="line">            dpi,</span><br><span class="line">            DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,</span><br><span class="line">            mediaRecorder.surface,</span><br><span class="line">            null,</span><br><span class="line">            null</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;é–‹å§‹</span><br><span class="line">        mediaRecorder.start()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;éŒ²ç”»æ­¢ã‚ã‚‹</span><br><span class="line">fun stopRec() &#123;</span><br><span class="line">    mediaRecorder.stop()</span><br><span class="line">    mediaRecorder.release()</span><br><span class="line">    virtualDisplay.release()</span><br><span class="line">    projection.stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä¿å­˜å…ˆå–å¾—ã€‚ä»Šå›ã¯å¯¾è±¡ç¯„å›²åˆ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹</span><br><span class="line">fun getFilePath(): File &#123;</span><br><span class="line">    &#x2F;&#x2F;ScopedStorageã§ä½œã‚‰ã‚Œã‚‹ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã¸ã®ã±ã™</span><br><span class="line">    val scopedStoragePath &#x3D; getExternalFilesDir(null)</span><br><span class="line">    &#x2F;&#x2F;å†™çœŸãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ</span><br><span class="line">    val file &#x3D; File(&quot;$&#123;scopedStoragePath?.path&#125;&#x2F;$&#123;System.currentTimeMillis()&#125;.mp4&quot;)</span><br><span class="line">    return file</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®Œæˆï¼"><a href="#å®Œæˆï¼" class="headerlink" title="å®Œæˆï¼"></a>å®Œæˆï¼</h2><p>é–‹å§‹ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã€‚<br><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/8942a6c6-0950-3c74-128a-a0fed4934bab.png" alt="Screenshot_20191010-200940.png"></p>
<p>ã€Œä»Šã™ãé–‹å§‹ã€ã‚’æŠ¼ã—ãŸã€‚<br>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®ãƒã‚¤ãƒ–ã‚¢ã‚¤ã‚³ãƒ³ã®éš£ã«ã‚­ãƒ£ã‚¹ãƒˆä¸­ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒå‡ºã¦ã¾ã™ã­ã€‚<br><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/174fed18-0694-8111-6287-94f26c3bfd7b.png" alt="Screenshot_20191010-200946.png"></p>
<p>åœæ­¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ä½œæˆã—ãŸå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ãŸ<br><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/409918/62653173-7209-4a74-9ff6-63f8eb695d83.png" alt="Screenshot_20191010-201017.png"></p>
<h2 id="Pixel-3-XL-ã§é­é‡ã—ãŸå•é¡Œ"><a href="#Pixel-3-XL-ã§é­é‡ã—ãŸå•é¡Œ" class="headerlink" title="Pixel 3 XL ã§é­é‡ã—ãŸå•é¡Œ"></a>Pixel 3 XL ã§é­é‡ã—ãŸå•é¡Œ</h2><h3 id="å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ"><a href="#å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ" class="headerlink" title="å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ"></a>å‹•ç”»ã®å¤§ãã•ãŒãŠã‹ã—ã„å•é¡Œ</h3><p>ã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ãŠãã¾ã—ãŸã€‚<br>æœ¬æ¥ã¯ã“ã®å€¤ã‚’å›ºå®šã™ã‚‹ã¹ãã§ã¯ç„¡ã„ã¨æ€ã„ã¾ã™ãŒPixel 3 XLã§ã—ã‹å‹•ã‹ã•ãªã„ã®ã§åˆ¥ã«ã„ã„ã‚„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> &#x2F;&#x2F;ç”»é¢ã®å¤§ãã•</span><br><span class="line"> &#x2F;&#x2F;Pixel 3 XLã ã¨ãªã‚“ã‹ãŠã‹ã—ããªã‚‹</span><br><span class="line"> var height &#x3D; 2800</span><br><span class="line"> var width &#x3D; 1400</span><br><span class="line"> var dpi &#x3D; 1000</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä»¥ä¸‹çœç•¥</span><br><span class="line"></span><br><span class="line"> override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int &#123;</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;ãƒ‡ãƒ¼ã‚¿å—ã‘å–ã‚‹</span><br><span class="line">     data &#x3D; intent?.getParcelableExtra(&quot;data&quot;)</span><br><span class="line">     code &#x3D; intent?.getIntExtra(&quot;code&quot;, Activity.RESULT_OK) ?: Activity.RESULT_OK</span><br><span class="line"></span><br><span class="line">     &#x2F;&#x2F;ç”»é¢ã®å¤§ãã•</span><br><span class="line">     &#x2F;&#x2F;   height &#x3D; intent?.getIntExtra(&quot;height&quot;, 1000) ?: 1000</span><br><span class="line">     &#x2F;&#x2F;   width &#x3D; intent?.getIntExtra(&quot;width&quot;, 1000) ?: 1000</span><br><span class="line">     dpi &#x3D; intent?.getIntExtra(&quot;dpi&quot;, 1000) ?: 1000</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;ä»¥ä¸‹çœç•¥</span><br></pre></td></tr></table></figure>

<h2 id="å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ"><a href="#å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ" class="headerlink" title="å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ"></a>å†…éƒ¨éŸ³å£°ã¯å–ã‚Œãªã„ã®ï¼Ÿ</h2><p>Android 10ã‹ã‚‰ã€ŒAudioPlaybackCapture APIã€ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸãŒ<br>å†…éƒ¨éŸ³å£°ã¯MediaRecorderã§ã¯ãªãAudioRecordã‚’ä½¿ã‚ãªã„ã¨éŒ²éŸ³ã§ããªã„ã€‚æ®‹å¿µã€‚<br>AudioRecordã®ä¿å­˜ã¨ã‹ã©ã†ã‚„ã‚‹ã‚“ã ã‚ã†ã€‚<br>ãã£ã¨ãã®ã†ã¡å‡ºã¦ãã‚‹ã¨æ€ã†ã®ã§ã—ã°ã‚‰ãå¾…ã¤ã“ã¨ã«ã™ã‚‹ã€‚</p>
<h2 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h2><p>Rootãªã—ã§å†…éƒ¨éŸ³å£°ãŒå–ã‚Œã‚‹ã®ã¯æœŸå¾…ã§ã™ã­ã€‚<br>ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã‚‹ã¨ãã«æ€ã„å‡ºã—ã¾ã—ãŸãŒã€Android Q Beta 3ãã‚‰ã„ã®ã¨ãAndroidã«æ¨™æº–ã§ç”»é¢éŒ²ç”»ãŒæ­è¼‰ã•ã‚Œãã†ã«ãªã£ãŸï¼ˆé–‹ç™ºè€…ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã§æœ‰åŠ¹ã«ã—ãªã„ã¨ã„ã‘ãªã„ï¼‰ã€‚<br>Betaç‰ˆã®æ®µéšã§ã¯é›»æºãƒœã‚¿ãƒ³é•·æŠ¼ã—ã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã‚‹ãƒœã‚¿ãƒ³ã‚’é•·æŠ¼ã—ã™ã‚Œã°åˆ©ç”¨ã§ããŸãã†ã€‚ï¼ˆæ®‹å¿µãªãŒã‚‰ç§ã®ç’°å¢ƒã§ã¯è½ã¡ã¦ä½¿ãˆãªã‹ã£ãŸã€‚ï¼‰<br>ã‘ã©æ­£å¼ç‰ˆã§ã¯å®Ÿè£…ã•ã‚Œãªã‹ã£ãŸã€‚ãœã²æ¨™æº–ã§æ¬²ã—ã„æ©Ÿèƒ½ãªã‚“ã ã‘ã©ãªã‚ã€‚</p>
<p>ãã‚Œã¨<br>Pixel 4ã€€ã¨ã€€docomo ã®ç™ºè¡¨ä¼šãŒæ¥½ã—ã¿ã§ã™ã­ï¼</p>
<p>æ›¸ããŸã„ã“ã¨ã¯å¤šåˆ†å…¨éƒ¨æ›¸ã„ãŸã®ã§ã€<br>ä»¥ä¸Šã§ã™ã€‚ãŠã¤ã€‚ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜ï¼˜</p>
<h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p><a href="https://github.com/takusan23/ScreenRecordSample" target="_blank" rel="noopener">https://github.com/takusan23/ScreenRecordSample</a><br>è©¦ã—ã¦ã¿ãŸã„æ–¹ã©ã†ãï½</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€çµ‚æ›´æ–°ï¼š<time datetime="2020-04-05T16:40:39.228Z" itemprop="dateUpdated">2020å¹´04æœˆ06æ—¥ 01æ™‚40åˆ†39ç§’ 01:40:39</time>
</span><br>


        
         
        
    </div>
    
    <footer>
        <a href="https://takusan23.github.io/Bibouroku">
            <img src="/img/avatar.gif" alt="takusan23">
            takusan23
        </a>
    </footer>
</blockquote>

        
<!-- <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div> -->



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AndroidQ/" rel="tag">AndroidQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MediaProjection/" rel="tag">MediaProjection</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%BB%E9%9D%A2%E9%8C%B2%E7%94%BB/" rel="tag">ç”»é¢éŒ²ç”»</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ã€‹ â€” ãŸãã•ã‚“ã®å‚™å¿˜éŒ²&url=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/&via=https://takusan23.github.io/Bibouroku" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="line share-sns" target="_blank" href="https://social-plugins.line.me/lineit/share?text=ã€Šã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ã€‹ â€” ãŸãã•ã‚“ã®å‚™å¿˜éŒ²&url=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/&via=https://takusan23.github.io/Bibouroku" data-title=" LINE">
          <i class="icon custom-icon-line"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/04/06/NavigationDrawer/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">ã€Android / Kotlinã€‘ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‰ãƒ­ãƒ¯ãƒ¼ã®ã¤ãã‚Šã‹ãŸ</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/04/06/MaterialDesign/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ã€Androidã€‘ Material Components ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ 1.0.0 ã‹ã‚‰ 1.1.0-alpha08 ã«ã—ã¦ã€Theme.MaterialComponentsã¨æˆ¦ã£ãŸè©±ã€‚</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
    </div>
</div>



</div>

        <footer class="footer">
    <!-- <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç·ã‚µã‚¤ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç·ã‚µã‚¤ãƒˆã‚¢ã‚¯ã‚»ã‚¹ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
            <span> </span>
        </p>
    </div> -->
    <div class="bottom">
        <p><span>takusan23 &copy; 2020</span>
            <span>
                
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ã€‹ â€” ãŸãã•ã‚“ã®å‚™å¿˜éŒ²&url=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/&via=https://takusan23.github.io/Bibouroku" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="line share-sns" target="_blank" href="https://social-plugins.line.me/lineit/share?text=ã€Šã€Android / MediaProjection / Kotlinã€‘Androidã§ç”»é¢éŒ²ç”»ã‚’ã™ã‚‹ã€‹ â€” ãŸãã•ã‚“ã®å‚™å¿˜éŒ²&url=https://takusan23.github.io/Bibouroku/2020/04/06/MediaProjection/&via=https://takusan23.github.io/Bibouroku" data-title=" LINE">
          <i class="icon custom-icon-line"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '';
            clearTimeout(titleTime);
        } else {
            document.title = '';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
